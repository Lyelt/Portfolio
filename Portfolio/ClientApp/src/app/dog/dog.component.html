<div class="flex flex-col justify-center px-8 -mt-12 mb-12" *ngIf="myDog !== nobody">
    
  <div class="flex flex-row justify-between items-center">
    <div class="w-1/3 flex flex-col">
      <h2 class="font-semibold text-gray-600 text-4xl">{{time | date: 'mediumTime'}}</h2>
    </div>
    <h1 class="w-1/3" class="text-xl">Who is Outside?</h1>
    <div class="w-1/3 flex justify-end" (click)="silence()"><mat-icon>notifications_off</mat-icon></div>
  </div>

  <hr class="border-gray-300 opacity-30 mb-12 mt-4" />

  <div class="container mx-auto flex flex-col space-y-8" *ngIf="connected">
    <div class="flex flex-row justify-between w-full space-x-8">

      <button class="w-1/3 h-12 flex flex-col items-center rounded border border-indigo-600 shadow" 
          [ngClass]="{'font-bold text-3xl bg-indigo-200 text-indigo-900 h-32 pt-8 border-none justify-between': outsideDog === myDog, 'justify-around': outsideDog !== myDog}"
          (click)="toggleDog(myDog)">
        <div class="font-semibold py-2 px-4">
          <span>{{getDogName(myDog)}}</span>
        </div>
        <div class="flex flex-row w-full" *ngIf="outsideDog === myDog">
          <div class="border-2 border-indigo-900 ping-2000 w-1/4" ></div>
          <div class="border-2 border-indigo-900 ping-2000 w-1/4 animation-delay-500"></div>
          <div class="border-2 border-indigo-900 ping-2000 w-1/4 animation-delay-1000"></div>
          <div class="border-2 border-indigo-900 ping-2000 w-1/4 animation-delay-1500"></div>
        </div>
      </button>

      <div class="w-1/3 h-12 flex flex-col items-center rounded border border-green-600 shadow" 
          [ngClass]="{'font-bold text-3xl bg-green-200 text-green-900 h-32 pt-8 border-none justify-between': outsideDog === nobody, 'justify-around': outsideDog !== nobody}"
          (click)="toggleDog(nobody)">
        <div class="font-semibold py-2 px-4">
          <span>{{getDogName(nobody)}}</span>
        </div>
        <div class="flex flex-row w-full" *ngIf="outsideDog === nobody">
          <div class="border-2 border-green-900 ping-2000 w-1/4" ></div>
          <div class="border-2 border-green-900 ping-2000 w-1/4 animation-delay-500"></div>
          <div class="border-2 border-green-900 ping-2000 w-1/4 animation-delay-1000"></div>
          <div class="border-2 border-green-900 ping-2000 w-1/4 animation-delay-1500"></div>
        </div>
      </div>

      <div class="w-1/3 h-12 flex flex-col items-center rounded border border-red-500 shadow" 
          [ngClass]="{'bg-red-200 text-red-900 h-32 pt-4 border-none justify-between': outsideDog === otherDog, 'justify-around': outsideDog !== otherDog}"
          (click)="toggleDog(otherDog)">
        <div class="font-semibold py-2 px-4" [ngClass]="{'font-bold text-3xl': outsideDog === otherDog}">
          <span>{{getDogName(otherDog)}}</span>
        </div>
        <button class="btn border border-red-900 flex flex-row space-x-2" (click)="awaitingAlert = true" *ngIf="outsideDog === otherDog">
          <mat-icon>add_alert</mat-icon>
          <div>Alert me when {{getDogName(otherDog)}}'s inside</div>
        </button>
        <div class="flex flex-row w-full mt-4" *ngIf="outsideDog === otherDog">
          <div class="border-2 border-red-900 ping-2000 w-1/4" ></div>
          <div class="border-2 border-red-900 ping-2000 w-1/4 animation-delay-500"></div>
          <div class="border-2 border-red-900 ping-2000 w-1/4 animation-delay-1000"></div>
          <div class="border-2 border-red-900 ping-2000 w-1/4 animation-delay-1500"></div>
        </div>
        
      </div>

    </div>
    <div class="flex flex-row justify-between">
      <div>
        <div class="text-xs italic underline" (click)="showingOldTimes = !showingOldTimes">since {{lastUpdatedTime | date: 'shortTime'}} ({{getDurationDisplay()}})</div>
        <div *ngIf="showingOldTimes"><div *ngFor="let dt of dogTimes" class="text-xs italic"><span>{{dt.timestamp + 'Z' | date: 'mediumTime'}}</span> - <span>{{getDogName(dt.dog)}}</span></div></div>
      </div>
      <div>
        <div class="flex flex-row justify-between bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4" *ngIf="(awaitingAlert && outsideDog === otherDog) || currentlyBeingNudged">
          <div class="flex flex-row space-x-2 pr-4 items-center">
              <mat-icon class="animate-pulse">{{awaitingAlert ? "info" : "warning"}}</mat-icon>
              <div *ngIf="awaitingAlert && !nudgeAcknowledged">You will be alerted when {{getDogName(otherDog)}} comes inside.</div>
              <div *ngIf="nudgeAcknowledged && !currentlyBeingNudged">{{getDogName(otherDog)}} will be inside soon...</div>
              <div *ngIf="currentlyBeingNudged && !nudgeAcknowledged">Please bring {{getDogName(myDog)}} inside!</div>
              <div *ngIf="currentlyBeingNudged && nudgeAcknowledged">Thanks! Let us know when it's all clear.</div>
          </div>
          <div class="flex flex-row space-x-4">
            <button *ngIf="awaitingAlert" class="btn bg-orange-700 text-orange-100 flex flex-row space-x-2" (click)="nudge()"><mat-icon>notifications</mat-icon><span>Nudge</span></button>
            <button *ngIf="awaitingAlert" class="btn border border-orange-700" (click)="cancelAlert()">Cancel</button>
            <button *ngIf="currentlyBeingNudged && !this.nudgeAcknowledged" class="btn bg-orange-700 text-orange-100" (click)="acknowledgeNudge()">Working on it...</button>
            <button *ngIf="currentlyBeingNudged" class="btn border border-orange-700" (click)="toggleDog(nobody)">All Clear</button>
          </div>
        </div>
      </div>
    </div>
    
  </div>
</div>

  <div class="flex flex-col justify-center px-8" *ngIf="myDog === nobody">
    <h1 class="font-bold text-2xl mb-12 text-center -mt-12">My dog is...</h1>
    <div class="flex flex-row justify-between">
        <button class="btn border border-indigo-400" (click)="claimPenny()">Penny</button>
        <button class="btn border border-indigo-400" (click)="claimCalvin()">Calvin</button>
    </div>
  </div>

  <div *ngIf="!connected" (click)="refresh()" class="bg-red-200 rounded text-red-900 shadow p-6 container mx-auto flex space-x-2 justify-between">
    <span>A connection error occurred.</span>
    <span class="font-bold underline">Click here to reconnect.</span>
  </div>