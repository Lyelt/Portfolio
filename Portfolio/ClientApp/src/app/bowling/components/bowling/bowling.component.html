<div class="flex flex-col justify-center md:px-8">
  <div class="mb-10">
    <div class="flex items-center justify-between px-4 mb-6">
      <span class="opacity-0"></span>
      <h1 class="font-bold text-2xl">Bowling Scores</h1>
      <span class="opacity-0" *ngIf="!currentUserId"></span>
      <mat-icon class="cursor-pointer" *ngIf="currentUserId" [matMenuTriggerFor]="menu">menu</mat-icon>
    </div>
    <mat-menu #menu="matMenu">
      <span mat-menu-item class="menu-item" (click)="view = 'overview'"><mat-icon>score</mat-icon>Overview</span>
      <span mat-menu-item class="menu-item" (click)="view = 'games';"><mat-icon>view_list</mat-icon>Add / View Games</span>
      <span mat-menu-item class="menu-item" (click)="view = 'stats';"><mat-icon>query_stats</mat-icon>Stats Report</span>
      <span mat-menu-item class="menu-item" (click)="currentUserId = null"><mat-icon>people_alt</mat-icon>Change Bowler</span>
    </mat-menu>
    <div class="max-w-md px-6 mx-auto" *ngIf="!currentUserId">
      <app-bowling-select-user [initialUserId]="currentUserId" [label]="'Choose bowler...'" (selectionChange)="selectUser($event)"></app-bowling-select-user>
    </div>
  </div>
  <div *ngIf="currentUserId" class="flex flex-col">
    <div class="container mx-auto max-w-6xl px-4">
      <bowling-filters></bowling-filters>
      <div *ngIf="view === 'overview'">
        <div class="mb-8">
          <app-bowling-stat statCategory="Overall"
            [userId]="currentUserId"
            [startTime]="selectedStartTime"
            [endTime]="selectedEndTime"></app-bowling-stat>
        </div>
        <app-bowling-chart [category]="currentSeriesCategory" 
                           [initialUserId]="currentUserId" 
                           (dataPointClicked)="openDialog($event)" #chart></app-bowling-chart>
      </div>
      <div *ngIf="view ==='games'">
        <app-bowling-start-session></app-bowling-start-session>
      </div>
      <div *ngIf="view === 'stats'">
        <bowling-stats [userId]="currentUserId" [startTime]="selectedStartTime" [endTime]="selectedEndTime"></bowling-stats>
      </div>
    </div>
  </div>
</div>

    <!-- <div class="flex justify-around items-center flex-wrap mb-6">
      <div class="flex items-center">
        <app-bowling-select-series-category [seriesCategories]="categoryLabels" [initialSeriesCategory]="currentSeriesCategory" [label]="'View chart type...'" (selectionChange)="selectSeriesCategory($event)"></app-bowling-select-series-category>
        <mat-icon class="cursor-pointer pl-2 pt-2" title="Refresh chart" (click)="refreshChart()">refresh</mat-icon>
      </div>
      <span class="link" (click)="openDialog()">Add / View Scores</span>
    </div>-->
    <!--<div class="mt-24 flex flex-col">
      <p class="text-gray-500 dark:text-gray-300 px-8 pb-8 text-center text-xs">Click a name in the legend to remove it from the chart. Use the above refresh button to reset the chart. You can also click a data point on the chart to open the corresponding session.</p>
      <div class="flex flex-wrap justify-around">
        <span class="link" (click)="updateStats()">Update based on selected time range</span>
      </div>
    </div> -->