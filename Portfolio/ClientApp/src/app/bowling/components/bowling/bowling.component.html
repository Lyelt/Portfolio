<div class="flex flex-col justify-center px-8">
  <h1 class="font-bold text-2xl mb-4 text-center">Bowling Scores</h1>
  <div class="flex justify-around items-center flex-wrap">
    <div class="flex items-center">
      <app-bowling-select-series-category [seriesCategories]="categoryLabels" [initialSeriesCategory]="currentSeriesCategory" [label]="'View chart type...'" (selectionChange)="selectSeriesCategory($event)"></app-bowling-select-series-category>
      <mat-icon class="cursor-pointer mb-4 ml-1" title="Refresh chart" (click)="refreshChart()">refresh</mat-icon>
    </div>
    <span class="link" (click)="openDialog()">Add / View Scores</span>
  </div>
  <div>
    <app-bowling-chart [category]="currentSeriesCategory" [initialUserId]="currentUserId" (dataPointClicked)="openDialog($event)" #chart></app-bowling-chart>
    </div>
  <div class="mt-24 flex flex-col">
    <p class="text-gray-500 px-8 pb-8 text-center text-xs">Click a name in the legend to remove it from the chart. Use the above refresh button to reset the chart. You can also click a data point on the chart to open the corresponding session.</p>
    <div class="flex flex-wrap justify-around">
      <app-bowling-select-user [initialUserId]="currentUserId" [label]="'View stats for bowler...'" (selectionChange)="selectUser($event)"></app-bowling-select-user>
      <span class="link" (click)="updateStats()">Update based on selected time range</span>
    </div>
  </div>
  <div class="my-4 text-center">
    <span *ngIf="selectedStartTime && selectedEndTime">Viewing stats from <span class="font-semibold">{{selectedStartTime | date: 'mediumDate'}} to {{selectedEndTime | date: 'mediumDate'}}</span>.</span>
    <span *ngIf="!selectedStartTime || !selectedEndTime">Viewing stats from <span class="uppercase tracking-wide font-semibold">all time</span>.</span>
    
  </div>
  <div class="flex flex-col justify-center mt-4 md:self-center">
    <mat-tab-group dynamicHeight mat-align-tabs="center">
      <mat-tab label="Quick Stats">
        <ng-template matTabContent>
          <app-bowling-stat statCategory="Overall"
                            [userId]="currentUserId"
                            [startTime]="selectedStartTime"
                            [endTime]="selectedEndTime"></app-bowling-stat>
        </ng-template>
      </mat-tab>
      <mat-tab label="Counts">
        <ng-template matTabContent>
          <app-bowling-stat statCategory="Count"
                            [userId]="currentUserId"
                            [startTime]="selectedStartTime"
                            [endTime]="selectedEndTime"></app-bowling-stat>
        </ng-template>
      </mat-tab>
      <mat-tab label="Splits">
        <ng-template matTabContent>
          <app-bowling-stat statCategory="Split"
                            [userId]="currentUserId"
                            [startTime]="selectedStartTime"
                            [endTime]="selectedEndTime"></app-bowling-stat>
        </ng-template>
      </mat-tab>
      <mat-tab label="Records">
        <ng-template matTabContent>
          <app-bowling-stat statCategory="Record"
                            [userId]="currentUserId"
                            [startTime]="selectedStartTime"
                            [endTime]="selectedEndTime"></app-bowling-stat>
        </ng-template>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
